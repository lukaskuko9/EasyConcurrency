@startuml
Request -> API: API Request to postpone payment
activate API

alt#Gold #LightGreen Not yet postponed
    API -> Database : Check if postponed
    activate Database
    Database -> API : Not postponed
    deactivate Database

    API -> ExternalService : Postpone in external service
    activate ExternalService
    ExternalService -> API
    deactivate ExternalService

    API -> Database : Postpone in database
    activate Database
    Database -> API : Postponed
    deactivate atabase
    API -> Request : Postpone succesful
else #Pink Already postponed
    API -> Database : Check if postponed
    activate Database
    Database -> API : Already postponed
    deactivate Database
    API -> Request : Postpone not succesful
end
deactivate API
@enduml