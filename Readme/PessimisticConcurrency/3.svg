<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="667px" preserveAspectRatio="none" style="width:556px;height:667px;background:#FFFFFF;" version="1.1" viewBox="0 0 556 667" width="556px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="577.3281" style="stroke:#181818;stroke-width:1;" width="10" x="143.5645" y="46.2969"/><rect fill="#FFBBBB" height="180.7969" style="stroke:#181818;stroke-width:1;" width="10" x="148.5645" y="237.2266"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="91.5625"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="149.8281"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="208.0938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="330.625"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="388.8906"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="461.9609"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="520.2266"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="578.4922"/><rect fill="#FFFFFF" height="32.1328" style="stroke:#181818;stroke-width:1;" width="10" x="483.7749" y="266.3594"/><rect fill="none" height="562.3281" style="stroke:#000000;stroke-width:1.5;" width="540.2275" x="9" y="53.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="148" x2="148" y1="36.2969" y2="632.625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="387.5215" x2="387.5215" y1="36.2969" y2="632.625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="488.3223" x2="488.3223" y1="36.2969" y2="632.625"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.1289" x="101" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.1289" x="108" y="24.9951">JobInstance</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.1289" x="101" y="631.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.1289" x="108" y="651.6201">JobInstance</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="347.5215" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="354.5215" y="24.9951">Database</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="347.5215" y="631.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="354.5215" y="651.6201">Database</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.9053" x="438.3223" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.9053" x="445.3223" y="24.9951">BankService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.9053" x="438.3223" y="631.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.9053" x="445.3223" y="651.6201">BankService</text><rect fill="#FFFFFF" height="577.3281" style="stroke:#181818;stroke-width:1;" width="10" x="143.5645" y="46.2969"/><rect fill="#FFBBBB" height="180.7969" style="stroke:#181818;stroke-width:1;" width="10" x="148.5645" y="237.2266"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="91.5625"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="149.8281"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="208.0938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="330.625"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="388.8906"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="461.9609"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="520.2266"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="382.9219" y="578.4922"/><rect fill="#FFFFFF" height="32.1328" style="stroke:#181818;stroke-width:1;" width="10" x="483.7749" y="266.3594"/><path d="M9,53.2969 L78.4893,53.2969 L78.4893,60.4297 L68.4893,70.4297 L9,70.4297 L9,53.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="562.3281" style="stroke:#000000;stroke-width:1.5;" width="540.2275" x="9" y="53.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24.4893" x="24" y="66.3638">par</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="95.3638" x="93.4893" y="65.5073">[First Instance]</text><polygon fill="#181818" points="370.9219,87.5625,380.9219,91.5625,370.9219,95.5625,374.9219,91.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="153.5645" x2="376.9219" y1="91.5625" y2="91.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.7671" x="160.5645" y="86.4966">Get payment message</text><polygon fill="#181818" points="164.5645,116.6953,154.5645,120.6953,164.5645,124.6953,160.5645,120.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="158.5645" x2="386.9219" y1="120.6953" y2="120.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.2095" x="170.5645" y="115.6294">Fetched</text><polygon fill="#181818" points="370.9219,145.8281,380.9219,149.8281,370.9219,153.8281,374.9219,149.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="153.5645" x2="376.9219" y1="149.8281" y2="149.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.4028" x="160.5645" y="144.7622">Can do refund</text><polygon fill="#181818" points="164.5645,174.9609,154.5645,178.9609,164.5645,182.9609,160.5645,178.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="158.5645" x2="386.9219" y1="178.9609" y2="178.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.4961" x="170.5645" y="173.895">Refund allowed</text><polygon fill="#181818" points="370.9219,204.0938,380.9219,208.0938,370.9219,212.0938,374.9219,208.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="153.5645" x2="376.9219" y1="208.0938" y2="208.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.4702" x="160.5645" y="203.0278">Lock payment message</text><polygon fill="#181818" points="169.5645,233.2266,159.5645,237.2266,169.5645,241.2266,165.5645,237.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="163.5645" x2="386.9219" y1="237.2266" y2="237.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46.1221" x="175.5645" y="232.1606">Locked</text><polygon fill="#181818" points="471.7749,262.3594,481.7749,266.3594,471.7749,270.3594,475.7749,266.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="158.5645" x2="477.7749" y1="266.3594" y2="266.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.4727" x="165.5645" y="261.2935">Payment - money transfer</text><polygon fill="#181818" points="169.5645,294.4922,159.5645,298.4922,169.5645,302.4922,165.5645,298.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="163.5645" x2="487.7749" y1="298.4922" y2="298.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.8228" x="175.5645" y="293.4263">Money transfered</text><path d="M19,279.3594 L19,304.3594 L137,304.3594 L137,289.3594 L127,279.3594 L19,279.3594 " fill="#FFBBBB" style="stroke:#181818;stroke-width:0.5;"/><path d="M127,279.3594 L127,289.3594 L137,289.3594 L127,279.3594 " fill="#FFBBBB" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.8999" x="25" y="296.4263">Critical Section</text><polygon fill="#181818" points="370.9219,326.625,380.9219,330.625,370.9219,334.625,374.9219,330.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="158.5645" x2="376.9219" y1="330.625" y2="330.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.8711" x="165.5645" y="325.5591">Process payment</text><polygon fill="#181818" points="169.5645,355.7578,159.5645,359.7578,169.5645,363.7578,165.5645,359.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="163.5645" x2="386.9219" y1="359.7578" y2="359.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.0791" x="175.5645" y="354.6919">Processed</text><polygon fill="#181818" points="370.9219,384.8906,380.9219,388.8906,370.9219,392.8906,374.9219,388.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="158.5645" x2="376.9219" y1="388.8906" y2="388.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.3574" x="165.5645" y="383.8247">Marked message as processed</text><polygon fill="#181818" points="164.5645,414.0234,154.5645,418.0234,164.5645,422.0234,160.5645,418.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="158.5645" x2="386.9219" y1="418.0234" y2="418.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.3574" x="170.5645" y="412.9575">Message marked as processed</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="9" x2="549.2275" y1="427.0234" y2="427.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="112.0142" x="14" y="437.2339">[Second Instance]</text><polygon fill="#181818" points="370.9219,457.9609,380.9219,461.9609,370.9219,465.9609,374.9219,461.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="153.5645" x2="376.9219" y1="461.9609" y2="461.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.7671" x="160.5645" y="456.895">Get payment message</text><polygon fill="#181818" points="164.5645,487.0938,154.5645,491.0938,164.5645,495.0938,160.5645,491.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="158.5645" x2="386.9219" y1="491.0938" y2="491.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.2095" x="170.5645" y="486.0278">Fetched</text><polygon fill="#181818" points="370.9219,516.2266,380.9219,520.2266,370.9219,524.2266,374.9219,520.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="153.5645" x2="376.9219" y1="520.2266" y2="520.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.4028" x="160.5645" y="515.1606">Can do refund</text><polygon fill="#181818" points="164.5645,545.3594,154.5645,549.3594,164.5645,553.3594,160.5645,549.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="158.5645" x2="386.9219" y1="549.3594" y2="549.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.4961" x="170.5645" y="544.2935">Refund allowed</text><polygon fill="#181818" points="370.9219,574.4922,380.9219,578.4922,370.9219,582.4922,374.9219,578.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="153.5645" x2="376.9219" y1="578.4922" y2="578.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154.4702" x="160.5645" y="573.4263">Lock payment message</text><polygon fill="#181818" points="164.5645,603.625,154.5645,607.625,164.5645,611.625,160.5645,607.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="158.5645" x2="386.9219" y1="607.625" y2="607.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.3828" x="170.5645" y="602.5591">Already locked</text><line style="stroke:#A80036;stroke-width:2;" x1="378.9219" x2="396.9219" y1="598.625" y2="616.625"/><line style="stroke:#A80036;stroke-width:2;" x1="378.9219" x2="396.9219" y1="616.625" y2="598.625"/><!--SRC=[xLFDQiCm3BxxAGGxzmLo6AmT6HiBbFO9L4VPGXsxo5f7tdxAchGEQGTXEyud8_Jz-9E5LkeZ2i5Bs3txAEWj6ND0XhpcA72f9Gsmk8T75DnXf0oUIE20RKDUeA4OyOqC3hH3cnak7JQboY0diUzKcfAcg5kg2bkXXp80K_NXorc2csy8e7FXSwPk1g_1xd_rt8xWbYfUcGRSvVbIpyJJ4lr-ItoihTfQzuuMq0HFBGYZZnNnXJ9fDybzQh0O4OojfYJ61wqugkHi4G1MN4jjqS6M51Iy8Osww_mXqpK7gqaEiSwAiyVEdcE1h6CO9WYewcUcEVf5Jz2S-4OyLnqbnT7EaLDw3IreNfVg_zhzqTezE2OiMt2dzLFvA1pQH5i_wXS0]--></g></svg>