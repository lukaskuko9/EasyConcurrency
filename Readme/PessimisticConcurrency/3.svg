<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="667px" preserveAspectRatio="none" style="width:685px;height:667px;background:#FFFFFF;" version="1.1" viewBox="0 0 685 667" width="685px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="561.3281" style="stroke:#181818;stroke-width:1;" width="10" x="314.1167" y="46.2969"/><rect fill="#FFBBBB" height="209.9297" style="stroke:#181818;stroke-width:1;" width="10" x="319.1167" y="178.9609"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="488.6094" y="120.6953"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="488.6094" y="178.9609"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="488.6094" y="301.4922"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="488.6094" y="359.7578"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="488.6094" y="491.0938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="488.6094" y="549.3594"/><rect fill="#FFFFFF" height="32.1328" style="stroke:#181818;stroke-width:1;" width="10" x="601.0459" y="237.2266"/><rect fill="none" height="562.3281" style="stroke:#000000;stroke-width:1.5;" width="668.082" x="10" y="53.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="55" x2="55" y1="36.2969" y2="632.625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="319.0425" x2="319.0425" y1="36.2969" y2="632.625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="493.209" x2="493.209" y1="36.2969" y2="632.625"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="606.0098" x2="606.0098" y1="36.2969" y2="632.625"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.4971" x="20" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.4971" x="27" y="24.9951">Request</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.4971" x="20" y="631.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.4971" x="27" y="651.6201">Request</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="36.1484" x="301.0425" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22.1484" x="308.0425" y="24.9951">API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="36.1484" x="301.0425" y="631.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="22.1484" x="308.0425" y="651.6201">API</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="453.209" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="460.209" y="24.9951">Database</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.8008" x="453.209" y="631.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.8008" x="460.209" y="651.6201">Database</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124.0723" x="544.0098" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.0723" x="551.0098" y="24.9951">ExternalService</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124.0723" x="544.0098" y="631.625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.0723" x="551.0098" y="651.6201">ExternalService</text><rect fill="#FFFFFF" height="561.3281" style="stroke:#181818;stroke-width:1;" width="10" x="314.1167" y="46.2969"/><rect fill="#FFBBBB" height="209.9297" style="stroke:#181818;stroke-width:1;" width="10" x="319.1167" y="178.9609"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="488.6094" y="120.6953"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="488.6094" y="178.9609"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="488.6094" y="301.4922"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="488.6094" y="359.7578"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="488.6094" y="491.0938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="488.6094" y="549.3594"/><rect fill="#FFFFFF" height="32.1328" style="stroke:#181818;stroke-width:1;" width="10" x="601.0459" y="237.2266"/><path d="M10,53.2969 L79.4893,53.2969 L79.4893,60.4297 L69.4893,70.4297 L10,70.4297 L10,53.2969 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="562.3281" style="stroke:#000000;stroke-width:1.5;" width="668.082" x="10" y="53.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24.4893" x="25" y="66.3638">par</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72.4399" x="94.4893" y="65.5073">[Request 1]</text><polygon fill="#181818" points="302.1167,87.5625,312.1167,91.5625,302.1167,95.5625,306.1167,91.5625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="55.7485" x2="308.1167" y1="91.5625" y2="91.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234.3682" x="62.7485" y="86.4966">API Request to postpone payment 1</text><polygon fill="#181818" points="476.6094,116.6953,486.6094,120.6953,476.6094,124.6953,480.6094,120.6953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="324.1167" x2="482.6094" y1="120.6953" y2="120.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.2139" x="331.1167" y="115.6294">Check if postponed</text><polygon fill="#181818" points="335.1167,145.8281,325.1167,149.8281,335.1167,153.8281,331.1167,149.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="329.1167" x2="492.6094" y1="149.8281" y2="149.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.6782" x="341.1167" y="144.7622">Not postponed</text><polygon fill="#181818" points="476.6094,174.9609,486.6094,178.9609,476.6094,182.9609,480.6094,178.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="329.1167" x2="482.6094" y1="178.9609" y2="178.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57.9351" x="336.1167" y="173.895">Lock row</text><polygon fill="#181818" points="340.1167,204.0938,330.1167,208.0938,340.1167,212.0938,336.1167,208.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="334.1167" x2="492.6094" y1="208.0938" y2="208.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46.1221" x="346.1167" y="203.0278">Locked</text><polygon fill="#181818" points="589.0459,233.2266,599.0459,237.2266,589.0459,241.2266,593.0459,237.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="329.1167" x2="595.0459" y1="237.2266" y2="237.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.8691" x="336.1167" y="232.1606">Postpone in external service</text><polygon fill="#181818" points="340.1167,265.3594,330.1167,269.3594,340.1167,273.3594,336.1167,269.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="334.1167" x2="605.0459" y1="269.3594" y2="269.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.3579" x="346.1167" y="264.2935">Postponed</text><path d="M190,250.2266 L190,275.2266 L308,275.2266 L308,260.2266 L298,250.2266 L190,250.2266 " fill="#FFBBBB" style="stroke:#181818;stroke-width:0.5;"/><path d="M298,250.2266 L298,260.2266 L308,260.2266 L298,250.2266 " fill="#FFBBBB" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97.8999" x="196" y="267.2935">Critical Section</text><polygon fill="#181818" points="476.6094,297.4922,486.6094,301.4922,476.6094,305.4922,480.6094,301.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="329.1167" x2="482.6094" y1="301.4922" y2="301.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.4927" x="336.1167" y="296.4263">Postpone in database</text><polygon fill="#181818" points="340.1167,326.625,330.1167,330.625,340.1167,334.625,336.1167,330.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="334.1167" x2="492.6094" y1="330.625" y2="330.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.3579" x="346.1167" y="325.5591">Postponed</text><polygon fill="#181818" points="476.6094,355.7578,486.6094,359.7578,476.6094,363.7578,480.6094,359.7578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="329.1167" x2="482.6094" y1="359.7578" y2="359.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.0586" x="336.1167" y="354.6919">Unlock row</text><polygon fill="#181818" points="335.1167,384.8906,325.1167,388.8906,335.1167,392.8906,331.1167,388.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="329.1167" x2="492.6094" y1="388.8906" y2="388.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60.2456" x="341.1167" y="383.8247">Unlocked</text><polygon fill="#181818" points="66.7485,414.0234,56.7485,418.0234,66.7485,422.0234,62.7485,418.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="60.7485" x2="313.1167" y1="418.0234" y2="418.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.2231" x="72.7485" y="412.9575">Postpone Succesful</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="678.082" y1="427.0234" y2="427.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72.4399" x="15" y="437.2339">[Request 2]</text><polygon fill="#181818" points="302.1167,457.9609,312.1167,461.9609,302.1167,465.9609,306.1167,461.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="55.7485" x2="308.1167" y1="461.9609" y2="461.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234.3682" x="62.7485" y="456.895">API Request to postpone payment 2</text><polygon fill="#181818" points="476.6094,487.0938,486.6094,491.0938,476.6094,495.0938,480.6094,491.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="324.1167" x2="482.6094" y1="491.0938" y2="491.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.2139" x="331.1167" y="486.0278">Check if postponed</text><polygon fill="#181818" points="335.1167,516.2266,325.1167,520.2266,335.1167,524.2266,331.1167,520.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="329.1167" x2="492.6094" y1="520.2266" y2="520.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.6782" x="341.1167" y="515.1606">Not postponed</text><polygon fill="#181818" points="476.6094,545.3594,486.6094,549.3594,476.6094,553.3594,480.6094,549.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="324.1167" x2="482.6094" y1="549.3594" y2="549.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57.9351" x="331.1167" y="544.2935">Lock row</text><polygon fill="#181818" points="335.1167,574.4922,325.1167,578.4922,335.1167,582.4922,331.1167,578.4922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="329.1167" x2="492.6094" y1="578.4922" y2="578.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.3828" x="341.1167" y="573.4263">Already locked</text><line style="stroke:#A80036;stroke-width:2;" x1="484.6094" x2="502.6094" y1="569.4922" y2="587.4922"/><line style="stroke:#A80036;stroke-width:2;" x1="484.6094" x2="502.6094" y1="587.4922" y2="569.4922"/><polygon fill="#181818" points="66.7485,603.625,56.7485,607.625,66.7485,611.625,62.7485,607.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="60.7485" x2="318.1167" y1="607.625" y2="607.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.2241" x="72.7485" y="602.5591">Postpone error</text><line style="stroke:#A80036;stroke-width:2;" x1="310.1167" x2="328.1167" y1="598.625" y2="616.625"/><line style="stroke:#A80036;stroke-width:2;" x1="310.1167" x2="328.1167" y1="616.625" y2="598.625"/><!--SRC=[lLAnJiCm4Dtz5ITrPg1Z1gHIg8I4K4I4c4roKIsC7ModaB_dtCQEQq8B2nwYwFpUFT-xrt7ZH2qwhXmyudkFrZ6WqoNrLNd7zaLUEx7Z3gSAmHRFMq6baGoNBFnTN7bSuJ_nrcdej7MTLaZSuGsLPtW4eM-uuo_SOW7hBTQl8De8Rexr0vA5doZse5r2Ql0x9LU30kurgHdzmLWw8ImscsiwRAP7fZlsEADu- -dGA2uhD3jHU-4oU24Ku7WBzd0zoMOyblU9RoZZuEaxSZfJcgeIMnSd96_NHj32IRv28ch5K3NWaNE6fUzkmfXdjtFqmXcZO4xgIScmdTy87E2P0zCcak8-mwDUY6SoMTNNDTgsbumEIZibVFddX2__D-4d0dwgV_Hm9GtoPW0P8csTqSD4-L5ptaaqHflOnTjEqSfNyGK0]--></g></svg>